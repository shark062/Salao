<!-- Main container -->
<div class="min-h-screen lg:flex bg-slate-100 dark:bg-slate-950 text-slate-800 dark:text-slate-200 font-sans">
  <!-- Sidebar -->
  <aside class="fixed inset-y-0 left-0 w-64 bg-white/90 dark:bg-slate-900/90 backdrop-blur-lg p-6 flex-col justify-between border-r border-slate-200 dark:border-slate-800 transition-transform duration-300 ease-in-out z-30 lg:relative lg:translate-x-0 flex"
         [class.translate-x-0]="isMenuOpen()"
         [class.-translate-x-full]="!isMenuOpen()">
    <div>
      <div class="text-center mb-10">
        <h2 class="text-2xl font-bold text-indigo-600 dark:text-indigo-400 font-sans tracking-tight">ERIDES SOUZA</h2>
        <p class="text-sm text-slate-500 dark:text-slate-400">Painel Administrativo</p>
      </div>
      <nav class="space-y-2">
        @for(item of [
          { key: 'dashboard', label: 'Dashboard', icon: 'M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z' },
          { key: 'appointments', label: 'Agendamentos', icon: 'M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z' },
          { key: 'clients', label: 'Clientes', icon: 'M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A5.995 5.995 0 0112 12a5.995 5.995 0 01-3 5.197' },
          { key: 'services', label: 'Servi√ßos', icon: 'M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z' },
          { key: 'financials', label: 'Financeiro', icon: 'M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z M13 21.945A9.001 9.001 0 103.055 11H13v10.945z' },
          { key: 'feedback', label: 'Avalia√ß√µes', icon: 'M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z' }
        ]; track item.key) {
          <button (click)="selectSection(item.key)" 
                  class="w-full flex items-center space-x-3 px-4 py-2 rounded-lg transition-all duration-200 transform hover:scale-105"
                  [class]="activeSection() === item.key ? 'bg-indigo-100 dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-300' : 'text-slate-700 dark:text-slate-300 hover:bg-slate-200/50 dark:hover:bg-slate-800/50'">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" [attr.d]="item.icon" /></svg>
            <span>{{ item.label }}</span>
          </button>
        }
      </nav>
    </div>
    <button (click)="logout()" class="w-full flex items-center space-x-3 px-4 py-2 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-red-100 dark:hover:bg-red-800/50 transition-colors duration-200 transform hover:scale-105 active:scale-100">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>
        <span>Sair</span>
    </button>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-4 sm:p-8 overflow-y-auto">
    <header class="flex justify-between items-center mb-8">
      <button class="lg:hidden p-2 text-slate-500 dark:text-slate-400" (click)="toggleMenu()">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
      </button>
      <h1 class="text-3xl font-bold text-indigo-600 dark:text-indigo-400 capitalize">{{ activeSection() }}</h1>
      <div class="flex items-center space-x-4">
        <span class="text-slate-700 dark:text-slate-300 hidden sm:inline">Ol√°, {{ currentUser()?.name }}! üëã</span>
        <app-theme-toggle />
      </div>
    </header>

    @switch (activeSection()) {
      @case ('dashboard') {
        <div class="animate-fade-in-down space-y-8">
          <!-- KPI Cards -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm p-6 rounded-2xl shadow-lg shadow-slate-400/10 dark:shadow-black/20 border-l-4 border-green-500"><h3 class="text-slate-500 dark:text-slate-400">Receita Total</h3><p class="text-3xl font-bold text-green-600 dark:text-green-400">{{ totalRevenue() | currency:'BRL' }}</p></div>
            <div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm p-6 rounded-2xl shadow-lg shadow-slate-400/10 dark:shadow-black/20 border-l-4 border-red-500"><h3 class="text-slate-500 dark:text-slate-400">Despesas Totais</h3><p class="text-3xl font-bold text-red-600 dark:text-red-400">{{ totalExpenses() | currency:'BRL' }}</p></div>
            <div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm p-6 rounded-2xl shadow-lg shadow-slate-400/10 dark:shadow-black/20 border-l-4 border-indigo-500"><h3 class="text-slate-500 dark:text-slate-400">Lucro L√≠quido</h3><p class="text-3xl font-bold text-indigo-600 dark:text-indigo-400">{{ netIncome() | currency:'BRL' }}</p></div>
          </div>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Upcoming Appointments -->
            <div><h2 class="text-xl font-semibold mb-4 text-indigo-600 dark:text-indigo-300">Pr√≥ximos Agendamentos</h2><div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm p-4 rounded-lg shadow-lg shadow-slate-400/10 dark:shadow-black/20 space-y-3">@for(app of upcomingAppointments().slice(0, 5); track app.id){<div class="flex justify-between items-center p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800/50"><div class="flex items-center"><span class="text-2xl mr-3">{{app.emoji}}</span><div><p class="font-semibold text-slate-800 dark:text-slate-200">{{app.userName}}</p><p class="text-sm text-slate-500 dark:text-slate-400">{{app.serviceName}}</p></div></div><div class="text-right"><p class="font-semibold">{{app.date | date:'dd/MM'}}</p><p class="text-sm text-slate-500 dark:text-slate-400">{{app.time}}</p></div></div>}@empty{<p class="text-center p-4 text-slate-500 dark:text-slate-400">Nenhum agendamento futuro.</p>}</div></div>
            <!-- Top Clients -->
            <div><h2 class="text-xl font-semibold mb-4 text-indigo-600 dark:text-indigo-300">Clientes Mais Frequentes</h2><div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm p-4 rounded-lg shadow-lg shadow-slate-400/10 dark:shadow-black/20 space-y-3">@for(client of topLoyalClients(); track client.id){<div class="flex justify-between items-center p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800/50"><div class="flex items-center"><img [src]="client.photoUrl || 'https://api.dicebear.com/8.x/initials/svg?seed=' + client.name" alt="" class="w-10 h-10 rounded-full mr-3 object-cover"><div><p class="font-semibold text-slate-800 dark:text-slate-200">{{client.name}}</p><p class="text-sm text-slate-500 dark:text-slate-400">{{client.email}}</p></div></div><span class="font-bold text-indigo-500 dark:text-indigo-400 text-lg">{{client.appointmentCount}}</span></div>}@empty{<p class="text-center p-4 text-slate-500 dark:text-slate-400">Nenhum cliente encontrado.</p>}</div></div>
          </div>
        </div>
      }
      @case ('appointments') {
        <div class="animate-fade-in-down">
          <div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm rounded-lg shadow-lg overflow-x-auto">
            <table class="w-full text-left text-sm">
              <thead class="bg-slate-50 dark:bg-slate-800/50 text-xs text-slate-700 dark:text-slate-400 uppercase tracking-wider">
                <tr>
                  <th class="px-4 py-3 font-medium">Cliente</th>
                  <th class="px-4 py-3 font-medium">Servi√ßo</th>
                  <th class="px-4 py-3 font-medium">Data</th>
                  <th class="px-4 py-3 font-medium">Hora</th>
                  <th class="px-4 py-3 font-medium">Status</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-slate-200 dark:divide-slate-800">
                @for(app of allAppointments(); track app.id){
                  <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50">
                    <td class="px-4 py-3 whitespace-nowrap font-medium text-slate-900 dark:text-slate-100">{{app.userName}}</td>
                    <td class="px-4 py-3 whitespace-nowrap">
                      <div class="flex items-center">
                        <span class="text-xl mr-2">{{app.emoji}}</span>
                        <span>{{app.serviceName}}</span>
                      </div>
                    </td>
                    <td class="px-4 py-3 whitespace-nowrap">{{app.date | date:'dd/MM/yyyy'}}</td>
                    <td class="px-4 py-3 whitespace-nowrap">{{app.time}}</td>
                    <td class="px-4 py-3">
                       <div class="flex items-center">
                          <span class="h-2.5 w-2.5 rounded-full mr-2" 
                              [class.bg-green-500]="app.status === 'confirmed'"
                              [class.bg-yellow-400]="app.status === 'pending'"
                              [class.bg-red-500]="app.status === 'cancelled'"></span>
                          <select [value]="app.status" 
                                  (change)="updateAppointmentStatus(app.id, $event)" 
                                  class="text-sm bg-slate-100 dark:bg-slate-800 border border-transparent rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition">
                            <option value="confirmed">Confirmado</option>
                            <option value="pending">Pendente</option>
                            <option value="cancelled">Cancelado</option>
                          </select>
                       </div>
                    </td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
      }
      @case ('clients') {
        <div class="animate-fade-in-down space-y-4">
          <div class="flex flex-wrap justify-between items-center gap-4">
            <input type="text" placeholder="Buscar cliente..." (input)="clientSearchTerm.set($event.target.value)" class="w-full max-w-sm bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
            <div class="flex gap-2">
                <button (click)="exportClients()" class="bg-slate-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 transition-transform hover:scale-105">Exportar CSV</button>
                <button (click)="openAddClientModal()" class="bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-700 transition-transform hover:scale-105">Adicionar Cliente</button>
            </div>
          </div>
          <div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm rounded-lg shadow-lg overflow-x-auto">
            <table class="w-full text-left text-sm">
              <thead class="bg-slate-50 dark:bg-slate-800/50 text-xs text-slate-700 dark:text-slate-400 uppercase tracking-wider">
                <tr>
                  <th class="px-4 py-3 font-medium">Cliente</th>
                  <th class="px-4 py-3 font-medium text-center">Agendamentos</th>
                  <th class="px-4 py-3 font-medium text-right">A√ß√µes</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-slate-200 dark:divide-slate-800">
                @for(c of filteredClients(); track c.id){
                  <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50">
                    <td class="px-4 py-3 whitespace-nowrap">
                      <div class="flex items-center">
                        <img [src]="c.photoUrl || 'https://api.dicebear.com/8.x/initials/svg?seed=' + c.name" alt="" class="w-10 h-10 rounded-full mr-4 object-cover">
                        <div>
                          <div class="font-medium text-slate-900 dark:text-slate-100">{{c.name}}</div>
                          <div class="text-xs text-slate-500 dark:text-slate-400">{{c.email}}</div>
                        </div>
                      </div>
                    </td>
                    <td class="px-4 py-3 whitespace-nowrap text-center">
                        <span class="px-3 py-1 font-semibold leading-tight text-indigo-700 bg-indigo-100 rounded-full dark:bg-indigo-700 dark:text-indigo-100">
                            {{c.appointmentCount}}
                        </span>
                    </td>
                    <td class="px-4 py-3 whitespace-nowrap text-right space-x-2">
                      <button (click)="openEditClientModal(c)" class="font-medium text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300">Editar</button>
                      <button (click)="openDeleteConfirmation('client', c.id, c.name)" class="font-medium text-red-600 hover:text-red-800 dark:text-red-500 dark:hover:text-red-400">Excluir</button>
                    </td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
      }
      @case ('services') {
        <div class="animate-fade-in-down space-y-4">
          <div class="text-right"><button (click)="openAddServiceModal()" class="bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-700 transition-transform hover:scale-105">Adicionar Servi√ßo</button></div>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            @for(s of services(); track s.id) {
              <div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm p-6 rounded-lg shadow-lg space-y-2">
                <div class="flex justify-between items-start"><div class="flex items-center"><span class="text-3xl mr-3">{{s.emoji}}</span><h3 class="text-xl font-bold text-slate-800 dark:text-slate-100">{{s.name}}</h3></div><span class="font-bold text-lg text-indigo-500 dark:text-indigo-400">{{s.price | currency:'BRL'}}</span></div>
                <p class="text-slate-600 dark:text-slate-400">{{s.description}}</p>
                <div class="text-sm text-slate-500 dark:text-slate-400"><span>Dura√ß√£o: {{s.duration}} min</span> &middot; <span>Categoria: {{s.category}}</span></div>
                <div class="pt-2 text-right space-x-2"><button (click)="openEditServiceModal(s)" class="text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300">Editar</button><button (click)="openDeleteConfirmation('service', s.id, s.name)" class="text-red-600 hover:text-red-800 dark:text-red-500 dark:hover:text-red-400">Excluir</button></div>
              </div>
            }
          </div>
        </div>
      }
      @case ('financials') {
        <div class="animate-fade-in-down space-y-8">
            <div class="flex justify-end">
                <button (click)="exportFinancials()" class="bg-slate-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 transition-transform hover:scale-105">Exportar CSV</button>
            </div>
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
                <!-- Charts -->
                <div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm p-6 rounded-lg shadow-lg">
                    <h3 class="font-semibold text-lg mb-4 text-green-600 dark:text-green-400">Receitas por Categoria</h3>
                    <div class="space-y-3">
                        @for(cat of revenuesByCategory(); track cat.name) {
                            <div class="w-full">
                                <div class="flex justify-between text-sm mb-1"><span class="capitalize">{{cat.name.replace('_', ' ')}}</span><span>{{cat.amount | currency:'BRL'}}</span></div>
                                <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5"><div class="bg-green-500 h-2.5 rounded-full" [style.width]="(cat.amount / maxRevenue() * 100) + '%'"></div></div>
                            </div>
                        }
                    </div>
                </div>
                <div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm p-6 rounded-lg shadow-lg">
                    <h3 class="font-semibold text-lg mb-4 text-red-600 dark:text-red-400">Despesas por Categoria</h3>
                    <div class="space-y-3">
                        @for(cat of expensesByCategory(); track cat.name) {
                            <div class="w-full">
                                <div class="flex justify-between text-sm mb-1"><span class="capitalize">{{cat.name}}</span><span>{{cat.amount | currency:'BRL'}}</span></div>
                                <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5"><div class="bg-red-500 h-2.5 rounded-full" [style.width]="(cat.amount / maxExpense() * 100) + '%'"></div></div>
                            </div>
                        }
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="space-y-4"><div class="flex justify-between items-center"><h2 class="text-xl font-semibold text-green-600 dark:text-green-400">Receitas</h2><button (click)="openAddRevenueModal()" class="bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition-transform hover:scale-105">Adicionar</button></div><div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm rounded-lg shadow-lg overflow-hidden"><ul class="divide-y divide-slate-200 dark:divide-slate-800">@for(r of revenues(); track r.id){<li class="p-4 flex justify-between items-center"><div><p class="font-medium">{{r.item}}</p><p class="text-sm text-slate-500 dark:text-slate-400">{{r.date | date:'dd/MM/yyyy'}}</p></div><div class="flex items-center gap-4"><span class="font-bold text-green-600 dark:text-green-400">{{r.amount | currency:'BRL'}}</span><button (click)="openDeleteConfirmation('revenue', r.id, r.item)" class="text-red-500 hover:text-red-700 text-sm">Excluir</button></div></li>}@empty{<li class="p-4 text-center text-slate-500">Nenhuma receita registrada.</li>}</ul></div></div>
                <div class="space-y-4"><div class="flex justify-between items-center"><h2 class="text-xl font-semibold text-red-600 dark:text-red-400">Despesas</h2><button (click)="openAddExpenseModal()" class="bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 transition-transform hover:scale-105">Adicionar</button></div><div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm rounded-lg shadow-lg overflow-hidden"><ul class="divide-y divide-slate-200 dark:divide-slate-800">@for(e of expenses(); track e.id){<li class="p-4 flex justify-between items-center"><div><p class="font-medium">{{e.item}}</p><p class="text-sm text-slate-500 dark:text-slate-400">{{e.date | date:'dd/MM/yyyy'}}</p></div><div class="flex items-center gap-4"><span class="font-bold text-red-600 dark:text-red-400">{{e.amount | currency:'BRL'}}</span><button (click)="openDeleteConfirmation('expense', e.id, e.item)" class="text-red-500 hover:text-red-700 text-sm">Excluir</button></div></li>}@empty{<li class="p-4 text-center text-slate-500">Nenhuma despesa registrada.</li>}</ul></div></div>
            </div>
        </div>
      }
      @case ('feedback') {
        <div class="animate-fade-in-down grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          @for(f of feedback(); track f.id) {
            <div class="bg-white/80 dark:bg-slate-900/60 backdrop-blur-sm p-6 rounded-lg shadow-lg">
              <div class="flex justify-between items-center mb-2">
                <p class="font-semibold">{{f.userName || 'An√¥nimo'}}</p>
                <div class="flex items-center text-yellow-400">@for(i of [].constructor(f.rating); track i){<span>&#9733;</span>}@for(i of [].constructor(5 - f.rating); track i){<span class="text-slate-300 dark:text-slate-600">&#9733;</span>}</div>
              </div>
              <p class="text-slate-600 dark:text-slate-400 italic">"{{f.comment}}"</p>
              <p class="text-sm text-slate-400 dark:text-slate-500 text-right mt-2">{{f.date | date:'dd/MM/yyyy'}}</p>
            </div>
          }
        </div>
      }
    }
  </main>
  
  <!-- Modals -->
  @if (isEditClientModalOpen() && editingClient()) {
    <div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in-scale-up p-4"><div class="bg-white dark:bg-slate-900 p-8 rounded-lg shadow-2xl w-full max-w-md space-y-4"><h2 class="text-xl font-bold">Editar Cliente</h2><form (ngSubmit)="saveClientChanges()" class="space-y-4"><div><label class="block text-sm font-medium">Nome</label><input type="text" name="name" [value]="editingClient()!.name" (input)="handleEditClientFormChange($event)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Email</label><input type="email" name="email" [value]="editingClient()!.email" (input)="handleEditClientFormChange($event)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Anivers√°rio</label><input type="date" name="birthday" [value]="editingClient()!.birthday" (input)="handleEditClientFormChange($event)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div class="flex justify-end gap-4 pt-4"><button type="button" (click)="closeEditClientModal()" class="px-4 py-2 rounded-md text-slate-700 dark:text-slate-300 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600">Cancelar</button><button type="submit" class="px-4 py-2 rounded-md text-white bg-indigo-600 hover:bg-indigo-700">Salvar</button></div></form></div></div>
  }
  @if (isAddClientModalOpen()) {
    <div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in-scale-up p-4"><div class="bg-white dark:bg-slate-900 p-8 rounded-lg shadow-2xl w-full max-w-md space-y-4"><h2 class="text-xl font-bold">Adicionar Cliente</h2><form (ngSubmit)="saveNewClient()" class="space-y-4"><div><label class="block text-sm font-medium">Nome</label><input type="text" name="name" [value]="newClientData().name" (input)="handleNewClientFormChange($event)" required class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Email</label><input type="email" name="email" [value]="newClientData().email" (input)="handleNewClientFormChange($event)" required class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Anivers√°rio</label><input type="date" name="birthday" [value]="newClientData().birthday" (input)="handleNewClientFormChange($event)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div class="flex justify-end gap-4 pt-4"><button type="button" (click)="closeAddClientModal()" class="px-4 py-2 rounded-md text-slate-700 dark:text-slate-300 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600">Cancelar</button><button type="submit" class="px-4 py-2 rounded-md text-white bg-indigo-600 hover:bg-indigo-700">Adicionar</button></div></form></div></div>
  }
  @if (isDeleteConfirmationOpen() && itemToDelete()) {
    <div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in-scale-up p-4"><div class="bg-white dark:bg-slate-900 p-8 rounded-lg shadow-2xl w-full max-w-md space-y-4 text-center"><h2 class="text-xl font-bold">Confirmar Exclus√£o</h2><p>Voc√™ tem certeza que deseja excluir <strong>{{ itemToDelete()?.name }}</strong>? Esta a√ß√£o n√£o pode ser desfeita.</p><div class="flex justify-center gap-4 pt-4"><button type="button" (click)="closeDeleteConfirmation()" class="px-4 py-2 rounded-md text-slate-700 dark:text-slate-300 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600">Cancelar</button><button (click)="confirmDelete()" class="px-4 py-2 rounded-md text-white bg-red-600 hover:bg-red-700">Excluir</button></div></div></div>
  }
  @if(isAddServiceModalOpen()) {
    <div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in-scale-up p-4"><div class="bg-white dark:bg-slate-900 p-8 rounded-lg shadow-2xl w-full max-w-md space-y-4"><h2 class="text-xl font-bold">Adicionar Servi√ßo</h2><form (ngSubmit)="saveNewService()" class="space-y-4"><div><label class="block text-sm font-medium">Nome</label><input type="text" [value]="newService().name" (input)="handleNewServiceChange('name', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Descri√ß√£o</label><textarea (input)="handleNewServiceChange('description', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500">{{newService().description}}</textarea></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium">Pre√ßo</label><input type="number" [value]="newService().price" (input)="handleNewServiceChange('price', $event.target.valueAsNumber)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Dura√ß√£o (min)</label><input type="number" [value]="newService().duration" (input)="handleNewServiceChange('duration', $event.target.valueAsNumber)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium">Categoria</label><input type="text" [value]="newService().category" (input)="handleNewServiceChange('category', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Emoji</label><input type="text" [value]="newService().emoji" (input)="handleNewServiceChange('emoji', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div></div><div class="flex justify-end gap-4 pt-4"><button type="button" (click)="closeAddServiceModal()" class="px-4 py-2 rounded-md text-slate-700 dark:text-slate-300 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600">Cancelar</button><button type="submit" class="px-4 py-2 rounded-md text-white bg-indigo-600 hover:bg-indigo-700">Salvar</button></div></form></div></div>
  }
  @if(isEditServiceModalOpen() && editingService()) {
    <div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in-scale-up p-4"><div class="bg-white dark:bg-slate-900 p-8 rounded-lg shadow-2xl w-full max-w-md space-y-4"><h2 class="text-xl font-bold">Editar Servi√ßo</h2><form (ngSubmit)="saveServiceChanges()" class="space-y-4"><div><label class="block text-sm font-medium">Nome</label><input type="text" [value]="editingService()!.name" (input)="handleEditServiceChange('name', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Descri√ß√£o</label><textarea (input)="handleEditServiceChange('description', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500">{{editingService()!.description}}</textarea></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium">Pre√ßo</label><input type="number" [value]="editingService()!.price" (input)="handleEditServiceChange('price', $event.target.valueAsNumber)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Dura√ß√£o (min)</label><input type="number" [value]="editingService()!.duration" (input)="handleEditServiceChange('duration', $event.target.valueAsNumber)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div></div><div class="grid grid-cols-2 gap-4"><div><label class="block text-sm font-medium">Categoria</label><input type="text" [value]="editingService()!.category" (input)="handleEditServiceChange('category', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Emoji</label><input type="text" [value]="editingService()!.emoji" (input)="handleEditServiceChange('emoji', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div></div><div class="flex justify-end gap-4 pt-4"><button type="button" (click)="closeEditServiceModal()" class="px-4 py-2 rounded-md text-slate-700 dark:text-slate-300 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600">Cancelar</button><button type="submit" class="px-4 py-2 rounded-md text-white bg-indigo-600 hover:bg-indigo-700">Salvar</button></div></form></div></div>
  }
  @if(isAddExpenseModalOpen()) {
    <div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in-scale-up p-4"><div class="bg-white dark:bg-slate-900 p-8 rounded-lg shadow-2xl w-full max-w-md space-y-4"><h2 class="text-xl font-bold">Adicionar Despesa</h2><form (ngSubmit)="saveNewExpense()" class="space-y-4"><div><label class="block text-sm font-medium">Item</label><input type="text" [value]="newExpense().item" (input)="handleNewExpenseChange('item', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Categoria</label><select [value]="newExpense().category" (change)="handleNewExpenseChange('category', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"><option value="supplies">Material</option><option value="rent">Aluguel</option><option value="utilities">Contas</option><option value="marketing">Marketing</option><option value="other">Outro</option></select></div><div><label class="block text-sm font-medium">Valor</label><input type="number" [value]="newExpense().amount" (input)="handleNewExpenseChange('amount', $event.target.valueAsNumber)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Data</label><input type="date" [value]="newExpense().date" (input)="handleNewExpenseChange('date', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div class="flex justify-end gap-4 pt-4"><button type="button" (click)="closeAddExpenseModal()" class="px-4 py-2 rounded-md text-slate-700 dark:text-slate-300 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600">Cancelar</button><button type="submit" class="px-4 py-2 rounded-md text-white bg-red-600 hover:bg-red-700">Salvar</button></div></form></div></div>
  }
  @if(isAddRevenueModalOpen()) {
    <div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in-scale-up p-4"><div class="bg-white dark:bg-slate-900 p-8 rounded-lg shadow-2xl w-full max-w-md space-y-4"><h2 class="text-xl font-bold">Adicionar Receita</h2><form (ngSubmit)="saveNewRevenue()" class="space-y-4"><div><label class="block text-sm font-medium">Item</label><input type="text" [value]="newRevenue().item" (input)="handleNewRevenueChange('item', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Categoria</label><select [value]="newRevenue().category" (change)="handleNewRevenueChange('category', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"><option value="product_sale">Venda de Produto</option><option value="course">Curso</option><option value="other">Outro</option></select></div><div><label class="block text-sm font-medium">Valor</label><input type="number" [value]="newRevenue().amount" (input)="handleNewRevenueChange('amount', $event.target.valueAsNumber)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div><label class="block text-sm font-medium">Data</label><input type="date" [value]="newRevenue().date" (input)="handleNewRevenueChange('date', $event.target.value)" class="mt-1 w-full bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-700 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500"></div><div class="flex justify-end gap-4 pt-4"><button type="button" (click)="closeAddRevenueModal()" class="px-4 py-2 rounded-md text-slate-700 dark:text-slate-300 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600">Cancelar</button><button type="submit" class="px-4 py-2 rounded-md text-white bg-green-600 hover:bg-green-700">Salvar</button></div></form></div></div>
  }
</div>